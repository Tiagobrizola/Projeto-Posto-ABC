CREATE TABLE ABC_BOMBA (
    ID_BOMBA     INTEGER NOT NULL,
    NOME_BOMBA   VARCHAR(100),
    TANQUE       VARCHAR(20),
    VALOR_LITRO  NUMERIC(15,2),
    CONSTRAINT PK_ABC_BOMBA PRIMARY KEY(ID_BOMBA)
);

CREATE GENERATOR GN_ABC_BOMBA;

CREATE OR ALTER TRIGGER TG_ABC_BOMBA FOR ABC_BOMBA
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
    NEW.ID_BOMBA = gen_id(GN_ABC_BOMBA, 1);
END;

INSERT INTO ABC_BOMBA
           (ID_BOMBA, NOME_BOMBA, TANQUE, VALOR_LITRO)
     VALUES(1, 'Bomba 1 gasolina', 'Tanque Gasolina 1', '5.50');

INSERT INTO ABC_BOMBA
           (ID_BOMBA, NOME_BOMBA, TANQUE, VALOR_LITRO)
     VALUES(2, 'Bomba 2 gasolina', 'Tanque Gasolina 1', '5.50');

INSERT INTO ABC_BOMBA
           (ID_BOMBA, NOME_BOMBA, TANQUE, VALOR_LITRO)
     VALUES(3, 'Bomba 3 Diesel', 'Tanque Diesel 2', '7.10');

INSERT INTO ABC_BOMBA
           (ID_BOMBA, NOME_BOMBA, TANQUE, VALOR_LITRO)
     VALUES(4, 'Bomba 4 Diesel', 'Tanque Diesel 2', '7.10');


CREATE TABLE ABC_ABASTECIMENTO (
    ID_ABASTECIMENTO  INTEGER NOT NULL,
    ID_BOMBA          INTEGER NOT NULL,
    DATA              DATE,
    QTD_LITRO         NUMERIC(15,2),
    VALOR             NUMERIC(15,2),
    VALOR_IMPOSTO     NUMERIC(15,2),
    VALOR_TOTAL       NUMERIC(15,2),
    CONSTRAINT PK_ABC_ABASTECIMENTO PRIMARY KEY(ID_ABASTECIMENTO),
    CONSTRAINT FK_ABC_ABASTECIMENTO_ABC_BOMBA FOREIGN KEY(ID_BOMBA) REFERENCES ABC_BOMBA(ID_BOMBA)
);

CREATE GENERATOR GN_ABC_ABASTECIMENTO;

CREATE OR ALTER TRIGGER TG_ABC_ABASTECIMENTO FOR ABC_ABASTECIMENTO
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
    NEW.ID_ABASTECIMENTO = gen_id(GN_ABC_ABASTECIMENTO, 1);
END;
